import{j as e,P as R,r as v}from"./index.js";import{R as I,r as g}from"./react-responsive.js";import{f as k,S as D}from"./Succes_Ticket.js";import{S as t,C as j,i as S,r as P,c as h,v as y}from"./antd.js";import{N as p}from"./Toast.js";import{L as b,B as L}from"./Button.js";import{c as z}from"./constants.js";import{R as u,a as w}from"./LockOutlined.js";import"./reactRouterDom.js";import"./zustand.js";const W=({rectangleStyle:r,RenderCard:s})=>e.jsxs(t,{children:[e.jsx(t,{style:{...r,transform:"rotate(45.524deg)",flexShrink:0,position:"fixed",zIndex:-1},children:e.jsx("img",{src:I,alt:"Logo",style:{borderRadius:"6.25rem",backgroundColor:"#243271"}})}),e.jsxs(t,{style:{display:"flex",gap:"10rem"},children:[e.jsx(t,{style:{width:"100%",height:"100%",flexShrink:0},children:e.jsx("img",{src:k,alt:"Logo"})}),e.jsx(s,{})]})]}),{Title:f}=S,T=()=>{const r={width:"20rem",color:"#243271",fontSize:"1.25rem",fontStyle:"normal",fontWeight:700,lineHeight:"1.5rem",margin:"0px 0px 0px 0px"},s={width:"20rem",color:"#000",fontSize:"1rem",fontStyle:"normal",fontWeight:400,lineHeight:"1.5rem",margin:"0px 0px 0px 0px"};return e.jsx(j,{style:{border:"0px"},children:e.jsxs(t,{style:{borderRadius:"1.25rem",backgroundColor:"#FFFFFF",boxShadow:"0px 0px 20px 0px rgba(0, 0, 0, 0.25)",display:"inline-flex",padding:"5rem",flexDirection:"column",alignItems:"flex-start",gap:"2.5rem"},children:[e.jsx("img",{src:b,alt:"Logo",style:{width:"18.75rem",height:"5.3125rem"}}),e.jsxs(t,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"1rem"},children:[e.jsx(f,{style:r,level:5,children:"Password Reset"}),e.jsx(f,{style:s,level:5,children:"Your Password has been reset successfully"})]}),e.jsxs(t,{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[e.jsx(t,{style:{display:"flex",width:"20rem",height:"3rem",padding:"0.25rem 0rem",flexDirection:"column",alignItems:"center"},children:e.jsx("img",{src:D,alt:"Logo"})}),e.jsx(f,{style:s,level:5,children:"Navigate to App and login with new password"})]})]})})},{Title:i}=S,E=({submitCreatePassword:r})=>{const[s,x]=P.useState({newPasword:"",confirmPassword:""}),m={display:"flex",alignItems:"center",width:"20rem",padding:"0.75rem 1.5rem",gap:"0.75rem",borderRadius:"0.75rem",backgroundColor:"#FFFFFF",boxShadow:"0px 0px 4px 0px rgba(0, 0, 0, 0.25)",color:"#545151",fontFamily:"verdana",fontSize:"1rem",fontStyle:"normal",fontWeight:400,lineHeight:"normal"},l={color:"#243271",fontSize:"1.3rem"},n={width:"20rem",color:"#243271",fontSize:"1.25rem",fontStyle:"normal",fontWeight:700,lineHeight:"1.5rem",margin:"0px 0px 0px 0px"},a={width:"20rem",color:"#000",fontSize:"1rem",fontStyle:"normal",fontWeight:400,lineHeight:"1.5rem",margin:"0px 0px 0px 0px"};return e.jsx(j,{style:{border:"0px"},children:e.jsxs(t,{style:{borderRadius:"1.25rem",backgroundColor:"#FFFFFF",boxShadow:"0px 0px 20px 0px rgba(0, 0, 0, 0.25)",display:"inline-flex",padding:"5rem",flexDirection:"column",alignItems:"flex-start",gap:"1.5rem"},children:[e.jsx("img",{src:b,alt:"Logo"}),e.jsxs(t,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"2rem"},children:[e.jsxs(t,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"1rem"},children:[e.jsx(i,{style:n,level:5,children:"Create New Password"}),e.jsx(i,{style:a,level:5,children:"Your new password must be different from previous used password."})]}),e.jsxs(t,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(i,{style:n,level:5,children:"New Password"}),e.jsx(h.Password,{style:m,placeholder:"Password",prefix:e.jsx(u,{style:l}),iconRender:o=>o?e.jsx(w,{style:l}):e.jsx(y,{style:l}),onChange:o=>{x({...s,newPasword:o.target.value})}}),e.jsx(i,{style:a,level:5,children:"Password must contains 8 characters."})]}),e.jsxs(t,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(i,{style:n,level:5,children:"Confirm Password"}),e.jsx(h.Password,{style:m,placeholder:"Confirm Password",prefix:e.jsx(u,{style:l}),iconRender:o=>o?e.jsx(w,{style:l}):e.jsx(y,{style:l}),onChange:o=>{x({...s,confirmPassword:o.target.value})}}),e.jsx(i,{style:a,level:5,children:"Both Passwords must match."})]})]}),e.jsx(L,{onClick:()=>{r(s)},text:"Update Password",size:"large",backgroundColor:z.secondaryColor,variant:"auth"})]})})},q=()=>{const r=g.useMediaQuery({minWidth:992}),s=g.useMediaQuery({minWidth:1200}),x={width:s?"40%":"20%",height:s?"40%":"20%",scale:s?"1.5":r?"1":"1.5",left:s?"-544px":r?"-336px":"-544px",top:s?"456px":r?"322px":"456px"},[m,l]=P.useState(!1),n=new URLSearchParams(window.location.search).get("token"),a=o=>{console.log(o),R(v.backend.forgotPassword,{...o,token:n}).then(c=>{console.log(c);const d=c.statusCode===200,C=d?"Success":"Error",F=d?"Password reset successfully":c.message||"An error occurred";p({message:C,description:F,position:"bottom",style:{},duration:d?3:5}),l(d),d&&setTimeout(()=>{p({message:"Success",description:"Password reset successfully",position:"bottom",style:{},duration:3})},1500)}).catch(c=>{console.error("Password reset error:",c),p({message:"Error",description:"Failed to connect to the server. Please try again.",position:"bottom",style:{},duration:5})})};return e.jsx(W,{rectangleStyle:x,RenderCard:()=>e.jsx(e.Fragment,{children:m?e.jsx(T,{}):e.jsx(E,{submitCreatePassword:a})})})};export{q as default};
