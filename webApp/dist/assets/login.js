import{r as c,j as e,R as b,P as w,u}from"./index.js";import{r as m,R as k}from"./react-responsive.js";import{L as C,B as F}from"./Button.js";import{c as I}from"./constants.js";import{r as p,C as L,S as n,c as h,v as R,i as T}from"./antd.js";import{u as v,L as D}from"./reactRouterDom.js";import{N as i}from"./Toast.js";import{R as E,a as P}from"./LockOutlined.js";import"./zustand.js";const N="/assets/loginScreenArt.svg",{Title:W}=T,y=()=>{const l=v(),[r,o]=p.useState(!1),[a,x]=p.useState({username:"",password:""}),f={display:"flex",alignItems:"center",width:"20rem",padding:"0.75rem 1.5rem",gap:"0.75rem",borderRadius:"0.75rem",backgroundColor:"#FFFFFF",boxShadow:"0px 0px 4px 0px rgba(0, 0, 0, 0.25)",color:"#545151",fontFamily:"verdana",fontSize:"1rem",fontStyle:"normal",fontWeight:400,lineHeight:"normal"},d={color:"#243271",fontSize:"1.3rem"},S={color:"#243271",fontSize:"0.875rem",fontWeight:550,lineHeight:"normal",cursor:"pointer",textDecoration:"underline"};async function g(t){if(t.username===""||t.password===""){i({message:"Warning",description:"Please fill all the fields",position:"bottom"});return}const j={username:t.username,password:t.password,clientID:"15908cac-a18b-4d68-a540-6c408c232aab"};try{o(!0);const s=await w(c.backend.login,j);s.statusCode===200?(localStorage.setItem("TripxingToken",s.data.token),delete s.data.token,s.data?(localStorage.setItem("TripxingUserData",JSON.stringify(s.data)),u.setState({CurrentUserData:s.data})):u.setState({CurrentUserData:null}),localStorage.getItem("TripxingToken")!==null&&(i({message:"Success",description:"Login Successful",position:"bottom",style:{},duration:3}),o(!1),l(c.frontend.dashboard))):s.statusCode===401?(o(!1),i({message:"Error",description:s.response.data.message,position:"bottom"})):(o(!1),i({message:"Error",description:s.response.data.message,position:"bottom"}))}catch(s){console.log(s)}}return p.useEffect(()=>{(localStorage.getItem("TripxingToken")||localStorage.getItem("TripxingToken-Zoho"))&&(l(c.frontend.dashboard),i({message:"info",description:"Already Logged In",position:"bottom"}))},[]),e.jsx(L,{style:{border:"0px"},children:e.jsxs(n,{style:{borderRadius:"1.25rem",backgroundColor:"#FFFFFF",boxShadow:"0px 0px 20px 0px rgba(0, 0, 0, 0.25)",display:"inline-flex",padding:"5rem",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[e.jsx("img",{src:C,alt:"Logo",className:"w-48 h-16 sm:w-72 sm:h-24 md:w-96 md:h-32 lg:w-96 lg:h-32 xl:w-96 xl:h-32"}),e.jsxs(n,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"2rem"},children:[e.jsx(h,{style:f,placeholder:"Enter UserName",prefix:e.jsx(b,{style:d}),onChange:t=>{x({...a,username:t.target.value})},onKeyDown:t=>{t.key==="Enter"&&g(a)}}),e.jsx(h.Password,{style:f,prefix:e.jsx(E,{style:d}),placeholder:"Enter Password",iconRender:t=>t?e.jsx(P,{style:d}):e.jsx(R,{style:d}),onChange:t=>{x({...a,password:t.target.value})},onKeyDown:t=>{t.key==="Enter"&&g(a)}}),e.jsx(n,{style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",alignSelf:"stretch",width:"20rem",background:"#FFF"},children:e.jsx(D,{to:c.frontend.forgetPassword,children:e.jsx(W,{style:S,level:5,children:"Forget Password ?"})})})]}),e.jsx(F,{onClick:()=>{g(a)},text:"Login",size:"large",backgroundColor:I.secondaryColor,variant:"auth",loading:r})]})})},J=()=>{const l=m.useMediaQuery({maxWidth:767}),r=m.useMediaQuery({minWidth:992}),o=m.useMediaQuery({minWidth:1200}),a={width:o?"40%":"20%",height:o?"40%":"20%",scale:o?"1.5":r?"1":"1.5",left:o?"-544px":r?"-336px":"-544px",top:o?"456px":r?"322px":"456px"};return e.jsx(n,{children:l?e.jsx(y,{}):e.jsxs(e.Fragment,{children:[e.jsx(n,{style:{...a,transform:"rotate(45.524deg)",flexShrink:0,position:"fixed",zIndex:-1},children:e.jsx("img",{src:k,alt:"Logo",style:{borderRadius:"6.25rem",backgroundColor:"#243271"}})}),e.jsxs(n,{style:{display:"flex",gap:"10rem"},children:[e.jsx(n,{style:{width:"100%",height:"100%",flexShrink:0},children:e.jsx("img",{src:N,alt:"Logo"})}),e.jsx(y,{})]})]})})};export{J as default};
